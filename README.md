# RDS AI Engine

–ë–∞–∑–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω WordPress –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ò–ò-—Å–µ—Ä–≤–∏—Å–∞–º–∏ —á–µ—Ä–µ–∑ OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ API. –ü–ª–∞–≥–∏–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏, –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ª—é–±—ã—Ö OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö API (OpenAI, OpenRouter, LM Studio, Ollama –∏ –¥—Ä.)
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞–º–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–æ–≤
- ‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ API –∫–ª—é—á–µ–π, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ **–ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å** - –∏–∑–æ–ª—è—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –º–µ–∂–¥—É –ø–ª–∞–≥–∏–Ω–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–ª–∞–≥–∏–Ω –≤ –ø–∞–ø–∫—É `/wp-content/plugins/rds-ai-engine/`
2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–ª–∞–≥–∏–Ω —á–µ—Ä–µ–∑ –º–µ–Ω—é "–ü–ª–∞–≥–∏–Ω—ã" WordPress
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "RDS AI Engine" –≤ –∞–¥–º–∏–Ω–∫–µ WordPress

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (API –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **RDS AI Engine ‚Üí Models**
2. –ù–∞–∂–º–∏—Ç–µ "Add New Model"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
   - **Model Name**: –ò–º—è –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "OpenAI GPT-4")
   - **Base URL**: URL API (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://api.openai.com/v1`)
   - **AI Model Name**: –ò–º—è –º–æ–¥–µ–ª–∏ –≤ API (–Ω–∞–ø—Ä–∏–º–µ—Ä, `gpt-4-turbo`)
   - **API Key**: –í–∞—à API –∫–ª—é—á
   - **Max Tokens**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **RDS AI Engine ‚Üí Assistants**
2. –ù–∞–∂–º–∏—Ç–µ "Add New Assistant"
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞:
   - **Name**: –ò–º—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
   - **System Prompt**: –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –ø–æ–≤–µ–¥–µ–Ω–∏–µ
   - **Default Model**: –ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - **Temperature**: –ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ (0-2)
   - **History Settings**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **RDS AI Engine ‚Üí Test Chat**
2. –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –∏/–∏–ª–∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
3. –ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–∏—Ö –ø–ª–∞–≥–∏–Ω–∞—Ö

### PHP Integration

#### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```php
// –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ AI Engine
$ai_engine = RDS_AIE_Main::get_instance();

// –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å
$response = $ai_engine->chat_completion([
    'assistant_id' => 1, // ID –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
    'message' => '–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?',
    'override_params' => [
        'temperature' => 0.8
    ]
]);

echo $response;
```

#### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å –∏—Å—Ç–æ—Ä–∏–µ–π

```php
class My_Plugin_AI_Assistant {

    private $ai_engine;
    private $plugin_id = 'my_plugin';
    private $session_id;

    public function __construct($user_id = 0) {
        $this->ai_engine = RDS_AIE_Main::get_instance();
        $this->session_id = $this->generate_session_id($user_id);
    }

    public function ask($message, $assistant_id = 1, $model_id = 0) {
        try {
            $response = $this->ai_engine->chat_completion([
                'assistant_id' => $assistant_id,
                'model_id' => $model_id,
                'message' => $message,
                'session_id' => $this->session_id,
                'plugin_id' => $this->plugin_id,
                'override_params' => [
                    'temperature' => 0.7,
                    'max_tokens' => 1000
                ]
            ]);

            return [
                'success' => true,
                'response' => $response,
                'session_id' => $this->session_id
            ];

        } catch (Exception $e) {
            return [
                'success' => false,
                'error' => $e->getMessage()
            ];
        }
    }

    public function get_conversation_history($limit = 10) {
        $history_manager = $this->ai_engine->get_history_manager();
        return $history_manager->get_formatted_history($this->session_id, $limit);
    }

    public function clear_history() {
        $history_manager = $this->ai_engine->get_history_manager();
        return $history_manager->clear_history($this->session_id);
    }

    private function generate_session_id($user_id) {
        return 'my_plugin_' . $user_id . '_' . md5(time() . wp_rand());
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
$assistant = new My_Plugin_AI_Assistant(get_current_user_id());

// –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å
$result = $assistant->ask('–†–∞—Å—Å–∫–∞–∂–∏ –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö WordPress');
if ($result['success']) {
    echo $result['response'];
}

// –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
$history = $assistant->get_conversation_history(5);
```

#### –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤

```php
// –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
$ai_engine = RDS_AIE_Main::get_instance();

// 1. –°–æ–∑–¥–∞–µ–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (–∏–ª–∏ –ø–æ–ª—É—á–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ)
$assistant_id = $ai_engine->get_or_create_assistant('My Plugin Assistant', [
    'system_prompt' => '–¢—ã –ø–æ–º–æ–≥–∞–µ—à—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞–≥–∏–Ω–æ–º My Plugin...',
    'temperature' => 0.7,
    'max_tokens' => 1000
]);

// 2. –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
$response = $ai_engine->chat_completion([
    'assistant_id' => $assistant_id,
    'message' => '–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–ª–∞–≥–∏–Ω?',
    'session_id' => 'user_' . get_current_user_id()
]);

// –ò–ª–∏ —á–µ—Ä–µ–∑ —Ö–µ–ª–ø–µ—Ä-—Ñ—É–Ω–∫—Ü–∏—é
$response = rds_aie_chat('–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–ª–∞–≥–∏–Ω?', $assistant_id);
```

#### –ü—Ä–∏–º–µ—Ä —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞–º–∏

```php
class Content_Generator {

    private $ai_engine;
    private $assistant_map = [
        'blog_writer' => 1,    // ID –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è –±–ª–æ–≥–æ–≤
        'seo_optimizer' => 2,  // ID –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è SEO
        'translator' => 3      // ID –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
    ];

    public function __construct() {
        $this->ai_engine = RDS_AIE_Main::get_instance();
    }

    public function generate_blog_post($topic, $tone = 'professional') {
        $prompt = "–ù–∞–ø–∏—à–∏ —Å—Ç–∞—Ç—å—é –≤ –±–ª–æ–≥–µ –Ω–∞ —Ç–µ–º—É: {$topic}\n";
        $prompt .= "–¢–æ–Ω: {$tone}\n";
        $prompt .= "–î–ª–∏–Ω–∞: 1000 —Å–ª–æ–≤\n";
        $prompt .= "–§–æ—Ä–º–∞—Ç: HTML —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏";

        return $this->ai_engine->chat_completion([
            'assistant_id' => $this->assistant_map['blog_writer'],
            'message' => $prompt,
            'session_id' => 'content_gen_' . md5($topic),
            'plugin_id' => 'content_generator'
        ]);
    }

    public function optimize_seo($text, $keywords) {
        $prompt = "–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π —Ç–µ–∫—Å—Ç –¥–ª—è SEO:\n\n";
        $prompt .= "–¢–µ–∫—Å—Ç: {$text}\n\n";
        $prompt .= "–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: " . implode(', ', $keywords) . "\n";
        $prompt .= "–°–¥–µ–ª–∞–π —Ç–µ–∫—Å—Ç —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–º –∏ SEO-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º.";

        return $this->ai_engine->chat_completion([
            'assistant_id' => $this->assistant_map['seo_optimizer'],
            'message' => $prompt,
            'override_params' => [
                'temperature' => 0.3, // –ë–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è SEO
                'max_tokens' => 2000
            ]
        ]);
    }
}
```

### JavaScript Integration

#### –ë–∞–∑–æ–≤—ã–π AJAX –ø—Ä–∏–º–µ—Ä

```javascript
class MyPluginAIClient {

    constructor(assistantId, modelId = 0) {
        this.assistantId = assistantId;
        this.modelId = modelId;
        this.sessionId = this.generateSessionId();
        this.conversationHistory = [];
    }

    sendMessage(message) {
        return new Promise((resolve, reject) => {
            jQuery.ajax({
                url: myPluginAjax.ajax_url,
                type: 'POST',
                data: {
                    action: 'my_plugin_ai_chat',
                    nonce: myPluginAjax.nonce,
                    message: message,
                    assistant_id: this.assistantId,
                    model_id: this.modelId,
                    session_id: this.sessionId
                },
                success: (response) => {
                    if (response.success) {
                        this.conversationHistory.push({
                            role: 'user',
                            content: message
                        });
                        this.conversationHistory.push({
                            role: 'assistant',
                            content: response.data.response
                        });
                        resolve(response.data.response);
                    } else {
                        reject(response.data.message);
                    }
                },
                error: (xhr, status, error) => {
                    reject(error);
                }
            });
        });
    }

    getHistory() {
        return this.conversationHistory;
    }

    clearHistory() {
        this.conversationHistory = [];
        this.sessionId = this.generateSessionId();
    }

    generateSessionId() {
        return 'myplugin_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    }
}

// PHP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è AJAX
add_action('wp_ajax_my_plugin_ai_chat', 'my_plugin_handle_ai_chat');
add_action('wp_ajax_nopriv_my_plugin_ai_chat', 'my_plugin_handle_ai_chat'); // –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–ª—è –≥–æ—Å—Ç–µ–π

function my_plugin_handle_ai_chat() {
    check_ajax_referer('my_plugin_nonce', 'nonce');

    $message = sanitize_textarea_field($_POST['message']);
    $assistant_id = intval($_POST['assistant_id']);
    $model_id = intval($_POST['model_id']);
    $session_id = sanitize_text_field($_POST['session_id']);

    try {
        $ai_engine = RDS_AIE_Main::get_instance();

        $response = $ai_engine->chat_completion([
            'assistant_id' => $assistant_id,
            'model_id' => $model_id,
            'message' => $message,
            'session_id' => $session_id,
            'plugin_id' => 'my_plugin'
        ]);

        wp_send_json_success([
            'response' => $response,
            'session_id' => $session_id
        ]);

    } catch (Exception $e) {
        wp_send_json_error([
            'message' => $e->getMessage()
        ]);
    }
}
```

#### –ü—Ä–∏–º–µ—Ä —á–∞—Ç–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

```javascript
// my-plugin-chat.js
(function ($) {
  "use strict";

  class MyPluginChat {
    constructor(options) {
      this.options = $.extend(
        {
          assistantId: 1,
          modelId: 0,
          container: "#my-plugin-chat",
          input: "#chat-input",
          sendBtn: "#send-btn",
          messagesContainer: "#chat-messages",
          userAvatar: "üë§",
          assistantAvatar: "ü§ñ",
          maxHistory: 10,
        },
        options
      );

      this.aiClient = new MyPluginAIClient(
        this.options.assistantId,
        this.options.modelId
      );

      this.init();
    }

    init() {
      const self = this;

      // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –∫–ª–∏–∫—É
      $(this.options.sendBtn).on("click", function () {
        self.sendMessage();
      });

      // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ Enter
      $(this.options.input).on("keydown", function (e) {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          self.sendMessage();
        }
      });

      // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
      this.loadHistory();
    }

    sendMessage() {
      const input = $(this.options.input);
      const message = input.val().trim();

      if (!message) return;

      // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      this.addMessage("user", message);
      input.val("");

      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
      this.showLoading();

      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
      this.aiClient
        .sendMessage(message)
        .then((response) => {
          this.hideLoading();
          this.addMessage("assistant", response);
          this.scrollToBottom();
        })
        .catch((error) => {
          this.hideLoading();
          this.addMessage("error", "–û—à–∏–±–∫–∞: " + error);
          this.scrollToBottom();
        });
    }

    addMessage(role, content) {
      const container = $(this.options.messagesContainer);
      const timestamp = new Date().toLocaleTimeString();

      let avatar, cssClass;
      switch (role) {
        case "user":
          avatar = this.options.userAvatar;
          cssClass = "user-message";
          break;
        case "assistant":
          avatar = this.options.assistantAvatar;
          cssClass = "assistant-message";
          break;
        case "error":
          avatar = "‚ùå";
          cssClass = "error-message";
          break;
      }

      const messageHtml = `
                <div class="chat-message ${cssClass}">
                    <div class="message-avatar">${avatar}</div>
                    <div class="message-content">
                        <div class="message-text">${this.escapeHtml(
                          content
                        )}</div>
                        <div class="message-time">${timestamp}</div>
                    </div>
                </div>
            `;

      container.append(messageHtml);
      this.scrollToBottom();
    }

    loadHistory() {
      const history = this.aiClient.getHistory();
      history.forEach((msg) => {
        this.addMessage(msg.role, msg.content);
      });
    }

    clearChat() {
      $(this.options.messagesContainer).empty();
      this.aiClient.clearHistory();
    }

    showLoading() {
      $(this.options.messagesContainer).append(`
                <div class="chat-message loading-message">
                    <div class="message-avatar">${this.options.assistantAvatar}</div>
                    <div class="message-content">
                        <div class="loading-dots">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                </div>
            `);
      this.scrollToBottom();
    }

    hideLoading() {
      $(this.options.messagesContainer).find(".loading-message").remove();
    }

    scrollToBottom() {
      const container = $(this.options.messagesContainer);
      container.scrollTop(container[0].scrollHeight);
    }

    escapeHtml(text) {
      const div = document.createElement("div");
      div.textContent = text;
      return div.innerHTML.replace(/\n/g, "<br>");
    }
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
  $(document).ready(function () {
    window.myPluginChat = new MyPluginChat({
      assistantId: myPluginChatSettings.assistantId,
      modelId: myPluginChatSettings.modelId,
      container: "#my-plugin-chat-container",
    });
  });
})(jQuery);
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

- `wp_rds_aie_models` - –º–æ–¥–µ–ª–∏/–∫—Ä–µ–¥–µ–Ω—à–∏–∞–ª—ã API
- `wp_rds_aie_assistants` - –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—ã —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- `wp_rds_aie_conversations` - –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤

### –ü–æ–ª—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞:

- `name` - –∏–º—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
- `system_prompt` - —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- `default_model_id` - ID –º–æ–¥–µ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `max_tokens` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
- `temperature` - —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å)
- `history_enabled` - –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –∏—Å—Ç–æ—Ä–∏—è
- `history_messages_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –∏—Å—Ç–æ—Ä–∏–∏

## –§–∏–ª—å—Ç—Ä—ã –∏ —Ö—É–∫–∏

### –§–∏–ª—å—Ç—Ä—ã WordPress:

```php
// –§–∏–ª—å—Ç—Ä –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
add_filter('rds_aie_chat_completion_params', function($params, $context) {
    // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    $params['top_p'] = 0.9;
    $params['frequency_penalty'] = 0.2;
    return $params;
}, 10, 2);

// –§–∏–ª—å—Ç—Ä –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
add_filter('rds_aie_chat_messages', function($messages, $assistant_id) {
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫ –ø–µ—Ä–≤–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
    if (!empty($messages) && $messages[0]['role'] === 'user') {
        $messages[0]['content'] = "–ö–æ–Ω—Ç–µ–∫—Å—Ç: —Å–µ–≥–æ–¥–Ω—è " . date('d.m.Y') . "\n\n" . $messages[0]['content'];
    }
    return $messages;
}, 10, 2);
```

### –°–æ–±—ã—Ç–∏—è:

```php
// –î–µ–π—Å—Ç–≤–∏–µ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ò–ò
add_action('rds_aie_chat_completion_success', function($response, $params) {
    error_log('AI Response received: ' . substr($response, 0, 100));
}, 10, 2);

// –î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
add_action('rds_aie_chat_completion_error', function($error, $params) {
    error_log('AI Error: ' . $error->getMessage());
}, 10, 2);
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Å—Å–∏–π

–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ `session_id` –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤.

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ–≥–¥–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –≤—ã–∑–æ–≤—ã –≤ try-catch –±–ª–æ–∫–∏.

### 3. –õ–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤

–£—á–∏—Ç—ã–≤–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤ –º–æ–¥–µ–ª–µ–π –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ —Ç–µ–∫—Å—Ç–∞–º–∏.

### 4. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —á–∞—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤–∞—à–µ–≥–æ –ø–ª–∞–≥–∏–Ω–∞.

### 5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ API –∫–ª—é—á–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é —Å—Ç–æ—Ä–æ–Ω—É
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ nonce –¥–ª—è –≤—Å–µ—Ö AJAX –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–ª–∞–≥–∏–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∏

```php
class Support_Bot {
    public function handle_support_request($user_message, $ticket_id) {
        $ai = RDS_AIE_Main::get_instance();

        $context = "–¢–∏–∫–µ—Ç #{$ticket_id}. –ò—Å—Ç–æ—Ä–∏—è –≤–æ–ø—Ä–æ—Å–∞: ...";

        return $ai->chat_completion([
            'assistant_id' => 4, // ID –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
            'message' => $context . "\n\n–í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: " . $user_message,
            'session_id' => 'ticket_' . $ticket_id,
            'plugin_id' => 'support_system'
        ]);
    }
}
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```php
class Social_Media_Generator {
    public function generate_post($platform, $topic, $style) {
        $ai = RDS_AIE_Main::get_instance();

        $assistant_map = [
            'twitter' => 5,
            'facebook' => 6,
            'instagram' => 7,
            'linkedin' => 8
        ];

        return $ai->chat_completion([
            'assistant_id' => $assistant_map[$platform],
            'message' => "–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –ø–æ—Å—Ç –¥–ª—è {$platform} –Ω–∞ —Ç–µ–º—É '{$topic}' –≤ —Å—Ç–∏–ª–µ {$style}",
            'override_params' => [
                'temperature' => 0.9, // –ë–æ–ª–µ–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ –¥–ª—è —Å–æ—Ü—Å–µ—Ç–µ–π
                'max_tokens' => 500
            ]
        ]);
    }
}
```

### 3. –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–µ–∫—Å—Ç–∞

```php
class Text_Analyzer {
    public function analyze_sentiment($text) {
        $ai = RDS_AIE_Main::get_instance();

        $response = $ai->chat_completion([
            'assistant_id' => 9, // ID –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞-–∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
            'message' => "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ –∏ –≤–µ—Ä–Ω–∏ JSON —Å –æ—Ü–µ–Ω–∫–æ–π –æ—Ç -1 –¥–æ 1:\n\n{$text}",
            'override_params' => [
                'temperature' => 0.1, // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
                'response_format' => ['type' => 'json_object']
            ]
        ]);

        return json_decode($response, true);
    }
}
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **"No AI model configured"** - –Ω–µ —Å–æ–∑–¥–∞–Ω–∞ –Ω–∏ –æ–¥–Ω–∞ –º–æ–¥–µ–ª—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
2. **API –æ—à–∏–±–∫–∏** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ URL, API –∫–ª—é—á –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞
3. **–ò—Å—Ç–æ—Ä–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (history_enabled)
4. **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã** - —É–≤–µ–ª–∏—á—å—Ç–µ timeout –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –º–æ–¥–µ–ª–∏

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

–í–∫–ª—é—á–∏—Ç–µ debug —Ä–µ–∂–∏–º WordPress –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤:

```php
// wp-config.php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

GPL v2 –∏–ª–∏ –ø–æ–∑–¥–Ω–µ–µ

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issue –Ω–∞ GitHub.

---

**RDS AI Engine** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ò–ò –≤ WordPress –ø—Ä–æ–µ–∫—Ç—ã. –° –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞ –≤—ã –º–æ–∂–µ—Ç–µ –±—ã—Å—Ç—Ä–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ò–ò-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ —Å–≤–æ–∏ –ø–ª–∞–≥–∏–Ω—ã –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Å–ª–æ–∂–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API.
