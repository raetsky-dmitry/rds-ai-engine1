## Роль:

Ты разработчик WordPress плагинов с большим опытом работы.

## Задача:

Разработать плагин который будет являтся базовым плагином для общения с ИИ.

## Функционал плагина

Название плагина RDS AI Engine
Плагин обеспечивает базовую интеграцию с ИИ, позволяющую другим плагинам общаться с ИИ либо через веб-хуки (на стороне сервера), либо через API (на стороне клиента, с ограничением по домену).

### Как это работает "под капотом"

#### Плагин позволяет:

- Создавать неограниченное количество креденшилов с данными для подключения к разным ИИ моделям (имеющим OpenAI совместимые API)
- Создавать неограниченное количество ИИ-асистентов, содержащих различные системные промпты (и может быть еще какие-то предустановленные настройки)
- Работать с историей диалогов
- Работать с базой знаний. В качестве хранилища для базы знаний предлагаю использовать стандартную БД WordPress, сделав в ней специальную псевдо-векторную таблицу:
  - при загрузке текстовый документ будет разбиваться на чанки и передаваться эмбединг-сервису для создания массива векторов
  - после этого чанк вместе с векторами и дополнительными метками (исходное название документа, категория, ...) помещается в таблицу БД
  - если в запросе к ИИ указано, что к нему следует добавить данные из базы знаний (равен истине соответствующий парметр), плагин:
    - отправляет запрос на эьбендинг
    - получает из БД все чанки (с предварительной фильтрацией по дополнительным параметрам)
    - в цикле для каждого чанка вычисляет степень близости с вектором запроса
    - берет n самых близких чанков и добавляет в качестве контекста к запросу к ИИ
- Предоставлять (на странице настроек) стандартный чат для диалога с ИИ (с дополнительными полями для выбора модели и ассистета)

### Страница настроек плагина

При активации плагин должен в меню админки создавать свою группу ссылок (на самой странице настроек переключение может идти по вкладкам):

- Модели
  - Базовый URL
  - Модель ИИ
  - API Key
  - Макимальны размер запроса в символах
- Ассистенты
  - системный промпт
  - другие пораметры по умолчанию
    - макс. длина ответа
    - температура
    - нужно ли добавлять историю диалога
      - к-во последних сообщений из истории (если задан предыдущий параметр)
    - нужно ли добавлять данные из базы знаний
      - предварительные фильтры
      - количество чанков
- История диалогов
  - основные настройки истории диалога (за какой макс. срок хранить, сколько последних пар вопро-ответ добавлять по-умолчанию)
- База знаний
  - Добавление новых текстовых файлов
  - Редактирование / удаление существующих
- Тестовый чат

## Технологические особенности

- плагин должен сразу писаться полностью готовым к переводу, отвечать стандартам WordPress, содержать все необходимые элементы для его далнейшей публикации на GitHub и WordPress репозетории

## Этапы работы:

- анализируешь описание проекта
- задаешь все необходимые уточняющие вопросы, если нужно повторяешь эту процедуру несколько раз (код пока не пишешь)
- предлагаешь свою концепцию и план реализации проекта
- только после согласования концепции и плана приступаешь к написанию кода
- Предлагаю вести разработку поэтапно:
  - сначала сделать базу моделей и ассистентов, разработать основные веб-хуки и API, на их основе сделать тестовый чат
  - добавить исторю диалогов
  - добавить базу знаний
